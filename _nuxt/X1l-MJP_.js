import{g as j,r as b,A as h,E as B,c as o,a as e,b as r,m as M,y as x,p as c,v as N,s as T,d as m,t as i,w as V,Y as D,V as E,o as a,F as U,B as F,_ as P}from"./W0gg2iT2.js";import{u as z,L as A}from"./DN4yzEEe.js";import{S as Y}from"./DP6LML0j.js";import{X as q}from"./hq94hZ8v.js";import{B as G}from"./thMZiv61.js";import{U as H}from"./CrJtTzIZ.js";import{E as I}from"./DJg3GFhi.js";import"./Dn-7A9HV.js";const O={class:"min-h-screen bg-slate-50 pb-6"},Q={class:"bg-slate-50/80 backdrop-blur"},R={class:"px-4 pb-3"},X={class:"flex items-center gap-2 rounded-2xl bg-white px-3 py-2.5 shadow-sm"},J={class:"mt-1 space-y-4 px-4"},K={class:"rounded-2xl bg-white p-3.5 shadow-sm"},W={class:"mb-3 flex items-center justify-between"},Z={class:"inline-flex items-center gap-2"},ee={class:"text-xs text-slate-400"},te={key:0,class:"ml-1 text-slate-300"},se={key:1,class:"text-slate-500"},le=["onClick"],ae={class:"relative h-36 w-full overflow-hidden"},oe=["src"],ne={class:"absolute bottom-2 left-3 right-3 flex items-end justify-between gap-2"},ie={class:"space-y-1"},re={class:"flex flex-wrap items-center gap-1.5"},ce={class:"rounded-full bg-black/50 px-2.5 py-[3px] text-[11px] text-slate-100"},de={class:"flex flex-col items-end text-[11px] text-slate-100 drop-shadow"},ue={class:"inline-flex items-center gap-1"},pe={class:"space-y-2 px-3 pb-3 pt-2.5"},xe={class:"text-[13px] font-semibold text-gray-900 leading-snug line-clamp-2"},me={class:"flex items-center justify-between gap-2"},he={class:"flex flex-wrap items-center gap-3 text-xs text-slate-500"},fe={class:"inline-flex items-center gap-1"},ge={class:"inline-flex items-center gap-1"},ve={key:1,class:"mt-4 text-center text-sm text-slate-400"},be={key:2,class:"mt-4 flex justify-center"},_e={key:3,class:"mt-4 text-center text-xs text-slate-400"},f=6,we=j({__name:"index",setup(ye){const _=E(),{posts:w}=z(),d=b(""),y=["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],k=l=>{const t=new Date(l);if(Number.isNaN(t.getTime()))return"";const s=t.getDate().toString().padStart(2,"0"),v=y[t.getMonth()],S=t.getFullYear()+543;return`${s} ${v} ${S}`},C=l=>l.toLocaleString("th-TH"),n=h(()=>w.value.filter(l=>{const t=d.value.trim().toLowerCase();return!(t&&!`${l.title} ${l.description} ${l.author}`.toLowerCase().includes(t))})),u=b(f);B(()=>n.value.length,()=>{u.value=Math.min(f,n.value.length)},{immediate:!0});const p=h(()=>n.value.slice(0,u.value)),g=h(()=>u.value<n.value.length),$=()=>{u.value=Math.min(u.value+f,n.value.length)},L=l=>{_.push(`/employee/learning/${l.id}`)};return(l,t)=>(a(),o("div",O,[e("header",Q,[t[2]||(t[2]=e("div",{class:"flex items-center justify-between px-4 pt-3 pb-2"},[e("div",{class:"flex items-center gap-3"},[e("div",null,[e("p",{class:"text-base font-semibold text-slate-900"}," ศูนย์การเรียนรู้พนักงาน "),e("p",{class:"text-xs text-slate-500 leading-snug"}," บทความ / วิดีโอ / เอกสารอบรม สำหรับทีมช่างและพนักงาน ")])])],-1)),e("div",R,[e("div",X,[r(c(Y),{class:"h-5 w-5 text-slate-400"}),M(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>d.value=s),type:"text",class:"w-full border-none bg-transparent text-[14px] text-slate-900 placeholder:text-slate-400 focus:outline-none",placeholder:"ค้นหาบทความ / หัวข้อ เช่น แอร์, ความปลอดภัย, ไฟฟ้า..."},null,512),[[N,d.value]]),d.value?(a(),o("button",{key:0,type:"button",class:"flex h-7 w-7 items-center justify-center rounded-full bg-slate-100 text-slate-400",onClick:t[1]||(t[1]=s=>d.value="")},[r(c(q),{class:"h-4 w-4"})])):x("",!0)])])]),e("main",J,[e("section",K,[e("div",W,[e("div",Z,[r(c(G),{class:"h-5 w-5 text-indigo-500"}),t[3]||(t[3]=e("p",{class:"text-sm font-semibold text-slate-900"}," บทความ / สื่อการเรียนรู้ ",-1))]),e("p",ee,[m(i(n.value.length)+" รายการ ",1),n.value.length?(a(),o("span",te,"·")):x("",!0),n.value.length?(a(),o("span",se," แสดง "+i(p.value.length),1)):x("",!0)])]),p.value.length?(a(),T(D,{key:0,name:"blog-list",tag:"div",class:"grid grid-cols-1 gap-3 sm:grid-cols-2 xl:grid-cols-3"},{default:V(()=>[(a(!0),o(U,null,F(p.value,s=>(a(),o("button",{key:s.id,type:"button",class:"w-full overflow-hidden rounded-2xl border border-slate-100 bg-slate-50 text-left shadow-sm active:scale-[0.99] active:bg-slate-100/70",onClick:v=>L(s)},[e("div",ae,[e("img",{src:s.coverUrl,alt:"ปกบทความ",class:"h-full w-full object-cover",loading:"lazy"},null,8,oe),t[4]||(t[4]=e("div",{class:"pointer-events-none absolute inset-0 bg-gradient-to-t from-black/60 via-black/10 to-transparent"},null,-1)),e("div",ne,[e("div",ie,[e("div",re,[e("span",ce,i(k(s.createdAt)),1)])]),e("div",de,[e("span",ue,[r(c(A),{class:"h-3.5 w-3.5"}),m(" "+i(s.subTopics.length)+" หัวข้อ ",1)])])])]),e("div",pe,[e("p",xe,i(s.description),1),e("div",me,[e("div",he,[e("span",fe,[r(c(H),{class:"h-4 w-4"}),m(" "+i(s.author),1)]),e("span",ge,[r(c(I),{class:"h-4 w-4"}),m(" "+i(C(s.viewCount))+" เข้าชม ",1)])]),t[5]||(t[5]=e("span",{class:"text-xs font-semibold text-indigo-600"}," อ่านต่อ → ",-1))])])],8,le))),128))]),_:1})):(a(),o("p",ve," ไม่พบบทความตามเงื่อนไขที่เลือก ")),p.value.length&&g.value?(a(),o("div",be,[e("button",{type:"button",class:"inline-flex min-h-[44px] items-center gap-2 rounded-full bg-indigo-600 px-5 py-2 text-sm font-semibold text-white shadow-sm active:scale-95",onClick:$}," โหลดบทความเพิ่ม ")])):p.value.length&&!g.value?(a(),o("p",_e," แสดงบทความครบแล้ว ")):x("",!0)]),t[6]||(t[6]=e("section",{class:"rounded-2xl bg-slate-100/80 border border-dashed border-slate-200 p-4 text-center text-sm text-slate-600 leading-relaxed"},[e("p",{class:"mb-1 font-semibold text-slate-800"}," แตะที่การ์ดบทความเพื่อเปิดอ่านเนื้อหาแบบเต็ม "),e("p",null," ภายในแต่ละบทความจะมีหัวข้อย่อย วิดีโอ และเอกสารประกอบให้เรียนรู้ต่อเนื่อง ")],-1))])]))}}),Ne=P(we,[["__scopeId","data-v-ff4a6eaa"]]);export{Ne as default};
