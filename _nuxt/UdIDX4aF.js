import{g as L,A as C,c as s,a as e,y as d,V as N,b as u,p as c,t as i,d as _,F as x,B as p,X as T,o as l}from"./W0gg2iT2.js";import{u as U,L as B}from"./DN4yzEEe.js";import{A as F}from"./CFEcHXgB.js";import{U as V}from"./CrJtTzIZ.js";import{E as $}from"./DJg3GFhi.js";import{c as A}from"./Dn-7A9HV.js";import{F as D}from"./MggqGaWE.js";const E=A("circle-play",[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),S={class:"min-h-screen bg-slate-50 pb-8"},P={class:"relative mb-3"},R={class:"relative h-48 sm:h-56 w-full overflow-hidden bg-slate-200"},I=["src"],M={key:1,class:"absolute bottom-3 left-4 right-4 space-y-1.5"},Y={class:"line-clamp-3 text-[18px] sm:text-xl font-semibold leading-snug text-white drop-shadow"},z={key:2,class:"absolute inset-0 flex items-center justify-center"},H={key:0,class:"-mt-4 px-4"},X={class:"mx-auto max-w-4xl rounded-2xl border border-slate-100 bg-white/95 px-4 py-3 shadow-sm backdrop-blur"},q={class:"flex flex-wrap items-center justify-between gap-2"},G={class:"flex flex-wrap items-center gap-2"},J={class:"inline-flex items-center gap-1 rounded-full bg-indigo-50 px-3 py-1 text-xs text-indigo-700"},K={class:"flex flex-col items-end gap-0.5 text-xs text-slate-400"},O={class:"inline-flex items-center gap-1"},Q={class:"mt-3 px-4"},W={class:"mx-auto max-w-4xl"},Z={key:0,class:"mt-4 rounded-2xl bg-white p-5 text-center text-sm text-slate-600"},ee={key:1,class:"space-y-5"},te={class:"rounded-2xl bg-slate-50 p-4 border border-slate-100"},se={class:"mb-3 inline-flex items-center gap-2"},le={class:"flex h-8 w-8 items-center justify-center rounded-full bg-slate-200"},oe={class:"space-y-2 text-sm text-slate-800"},ae={class:"mt-[2px] h-5 w-5 flex-shrink-0 rounded-full bg-indigo-100 text-center text-xs font-semibold text-indigo-700 leading-5"},ie={class:"font-medium leading-snug"},ne={key:0,class:"text-xs text-slate-500 mt-0.5"},re={class:"mb-3 flex items-start justify-between gap-2"},de={class:"text-xs font-semibold uppercase tracking-[0.16em] text-indigo-500"},ce={class:"text-base font-semibold text-slate-900 leading-snug"},ue={key:0,class:"mt-1 text-sm text-slate-600 leading-relaxed"},me={class:"rounded-full bg-slate-100 px-2.5 py-1 text-xs text-slate-600 shrink-0"},xe={class:"mt-1 space-y-3"},pe={class:"mb-2 flex items-center justify-between gap-2"},he={class:"inline-flex items-center gap-2"},_e={class:"text-sm font-medium text-slate-900"},be={key:0,class:"text-xs text-slate-400"},fe={class:"overflow-hidden rounded-lg bg-black/5 aspect-video"},ge=["src"],ye=["src"],ve={key:0,class:"mt-2 text-xs text-slate-500 leading-relaxed"},we={class:"mb-2 flex items-center justify-between gap-2"},ke={class:"inline-flex items-center gap-2"},je={class:"text-sm font-medium text-slate-900 line-clamp-1"},Le={class:"text-xs text-slate-400"},Ce={class:"h-56 overflow-hidden rounded-lg border border-slate-200 bg-slate-100"},Ne=["src"],Te={class:"mt-2 flex items-start justify-between gap-2"},Ue={key:0,class:"text-xs text-slate-500 line-clamp-2 leading-relaxed"},Be=["href"],Re=L({__name:"[id]",setup(Fe){const b=T(),h=N(),{findPostById:f}=U(),n=C(()=>f(b.params.id)),g=["ม.ค.","ก.พ.","มี.ค.","เม.ย.","พ.ค.","มิ.ย.","ก.ค.","ส.ค.","ก.ย.","ต.ค.","พ.ย.","ธ.ค."],y=r=>{const t=new Date(r);if(Number.isNaN(t.getTime()))return"";const a=t.getDate().toString().padStart(2,"0"),m=g[t.getMonth()],o=t.getFullYear()+543;return`${a} ${m} ${o}`},v=r=>r.toLocaleString("th-TH"),w=()=>h.back(),k=r=>/youtube\.com|youtu\.be/.test(r),j=r=>{try{const t=new URL(r);if(t.hostname.includes("youtu.be"))return`https://www.youtube.com/embed${t.pathname}`;const a=t.searchParams.get("v");return a?`https://www.youtube.com/embed/${a}`:r}catch{return r}};return(r,t)=>(l(),s("div",S,[e("header",P,[e("div",R,[n.value?(l(),s("img",{key:0,src:n.value.coverUrl,alt:"ปกบทความ",class:"h-full w-full object-cover"},null,8,I)):d("",!0),t[3]||(t[3]=e("div",{class:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent"},null,-1)),e("button",{type:"button",class:"absolute left-3 top-3 flex h-10 w-10 items-center justify-center rounded-full bg-black/60 text-white shadow-sm active:scale-95",onClick:w},[u(c(F),{class:"h-5 w-5"})]),n.value?(l(),s("div",M,[t[1]||(t[1]=e("p",{class:"text-xs font-semibold uppercase tracking-[0.16em] text-emerald-200"}," ศูนย์การเรียนรู้พนักงาน ",-1)),e("h1",Y,i(n.value.title),1)])):(l(),s("div",z,[...t[2]||(t[2]=[e("p",{class:"text-sm font-semibold text-white drop-shadow"}," ไม่พบบทความ ",-1)])]))]),n.value?(l(),s("div",H,[e("div",X,[e("div",q,[e("div",G,[e("span",J,[u(c(V),{class:"h-4 w-4"}),_(" "+i(n.value.author),1)])]),e("div",K,[e("span",O,[u(c($),{class:"h-4 w-4"}),_(" "+i(v(n.value.viewCount))+" เข้าชม ",1)]),e("span",null,"เผยแพร่ "+i(y(n.value.createdAt)),1)])])])])):d("",!0)]),e("main",Q,[e("div",W,[n.value?(l(),s("section",ee,[e("section",te,[e("div",se,[e("div",le,[u(c(B),{class:"h-4 w-4 text-slate-700"})]),t[6]||(t[6]=e("p",{class:"text-sm font-semibold text-slate-900"}," หัวข้อในบทความนี้ ",-1))]),e("ol",oe,[(l(!0),s(x,null,p(n.value.subTopics,(a,m)=>(l(),s("li",{key:a.id,class:"flex items-start gap-2.5"},[e("span",ae,i(m+1),1),e("div",null,[e("p",ie,i(a.title),1),a.summary?(l(),s("p",ne,i(a.summary),1)):d("",!0)])]))),128))])]),(l(!0),s(x,null,p(n.value.subTopics,(a,m)=>(l(),s("section",{key:a.id,class:"rounded-2xl bg-white p-4 shadow-sm"},[e("div",re,[e("div",null,[e("p",de," หัวข้อที่ "+i(m+1),1),e("h2",ce,i(a.title),1),a.summary?(l(),s("p",ue,i(a.summary),1)):d("",!0)]),e("span",me,i(a.contents.length)+" เนื้อหา ",1)]),e("div",xe,[(l(!0),s(x,null,p(a.contents,o=>(l(),s("article",{key:o.id,class:"rounded-xl border border-slate-100 bg-slate-50 px-3 py-3"},[o.type==="video"?(l(),s(x,{key:0},[e("div",pe,[e("div",he,[u(c(E),{class:"h-4 w-4 text-rose-500"}),e("p",_e,i(o.label||"วิดีโอประกอบการเรียนรู้"),1)]),o.duration?(l(),s("span",be,i(o.duration),1)):d("",!0)]),e("div",fe,[k(o.url)?(l(),s("iframe",{key:0,src:j(o.url),class:"h-full w-full",frameborder:"0",allowfullscreen:""},null,8,ge)):(l(),s("video",{key:1,src:o.url,controls:"",class:"h-full w-full bg-black/90"},null,8,ye))]),o.description?(l(),s("p",ve,i(o.description),1)):d("",!0)],64)):o.type==="pdf"?(l(),s(x,{key:1},[e("div",we,[e("div",ke,[u(c(D),{class:"h-4 w-4 text-indigo-600"}),e("p",je,i(o.label||"เอกสารประกอบ (PDF)"),1)]),e("span",Le,i(o.pages?o.pages+" หน้า":""),1)]),e("div",Ce,[e("iframe",{src:o.url,class:"h-full w-full"},null,8,Ne)]),e("div",Te,[o.description?(l(),s("p",Ue,i(o.description),1)):d("",!0),e("a",{href:o.url,target:"_blank",class:"shrink-0 min-h-[36px] inline-flex items-center rounded-full bg-white border border-slate-200 px-3 text-xs font-semibold text-indigo-600 active:scale-95"}," เปิดเอกสารเต็ม ",8,Be)])],64)):d("",!0)]))),128))])]))),128))])):(l(),s("section",Z,[t[4]||(t[4]=e("p",{class:"mb-1 text-base font-semibold text-slate-900"}," ไม่พบบทความที่คุณเลือก ",-1)),t[5]||(t[5]=e("p",{class:"mb-4"}," อาจถูกลบออกจากระบบ หรือ URL ไม่ถูกต้อง ",-1)),e("button",{type:"button",class:"min-h-[44px] rounded-full bg-indigo-600 px-5 py-2 text-sm font-semibold text-white shadow-sm active:scale-95",onClick:t[0]||(t[0]=a=>c(h).push("/employee/learning"))}," กลับไปหน้ารายการบทความ ")]))])])]))}});export{Re as default};
